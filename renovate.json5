{
  $schema: "https://docs.renovatebot.com/renovate-schema.json",
  extends: [
    "config:base"
  ],
  dependencyDashboard: true,
  configMigration: true,

  // Personal preferences
  timezone: "America/Los_Angeles",
  assignees: ["@emmercm"],
  reviewers: ["@emmercm"],
  assignAutomerge: false, // default

  // Open PRs immediately for vulnerability alerts
  // Requires "dependency graph" and "dependabot alerts" enabled for the repo
  vulnerabilityAlerts: {
    enabled: true, // default
    schedule: "at any time", // default
    prCreation: "immediate" // default
  },

  // Use pseudo semantic commit (and therefore PR title) commit messages
  // "{{{commitMessagePrefix}}} {{{commitMessageAction}}} {{{commitMessageTopic}}} {{{commitMessageExtra}}} {{{commitMessageSuffix}}}"
  commitMessagePrefix: "Chore:",
  commitMessageAction: "update",

  // Separate potentially breaking updates, group others
  separateMultipleMajor: true,
  separateMajorMinor: true, // default
  separateMinorPatch: false, // default

  // Allow auto-merging of PRs, but reduce their spam on the commit log
  schedule: "every weekday",
  automerge: true,
  automergeSchedule: "on sunday",
  prHourlyLimit: 0,

  npm: {
    lockFileMaintenance: {
      enabled: true,
      commitMessageAction: "update", // same as above
      commitMessageTopic: "lockfile"
    },
    transitiveRemediation: true,

    stabilityDays: 3,

    packageRules: [
      // Dependencies
      {
        groupName: "dependencies",
        matchDepTypes: ["dependencies", "devDependencies"],
        rangeStrategy: "bump",
        commitMessageAction: "update" // don't use `rangeStrategy` as the action
      },

      // Dev dependencies
      {
        // Pin (and update) devDependencies versions
        matchDepTypes: ["devDependencies"],
        rangeStrategy: "pin",
        commitMessageAction: "update" // don't use `rangeStrategy` as the action
      },
      {
        // Group devDependencies together, minus type definitions for dependencies
        // https://github.com/renovatebot/renovate/issues/519
        matchDepTypes: ["devDependencies"],
        excludePackageNames: [
          "@types/7zip-min",
          "@types/async",
          "@types/cli-progress",
          "@types/figlet",
          "@types/micromatch",
          "@types/semver",
          "@types/xml2js",
          "@types/yargs",
          "@types/yauzl",
          "@types/yazl"
        ],
        groupName: "dev dependencies"
      },
      {
        // Group Jest together because of peerDependencies
        matchPackageNames: [
          "@jest/globals",
          "@types/jest",
          "jest",
          "ts-jest"
        ],
        groupName: "Jest"
      },
      {
        // Separate TypeScript because upgrades are dependent on support by other dependencies
        matchPackageNames: ["typescript"],
        groupName: "TypeScript"
      },

      // Everything else
      {
        matchDepTypes: ["optionalDependencies", "peerDependencies", "engines", "volta"],
        enabled: false
      }
    ]
  }
}
